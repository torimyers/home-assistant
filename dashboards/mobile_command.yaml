# Mobile Command Dashboard - Pocket-Sized Sietch Control
# Optimized for mobile devices with touch-friendly controls

title: "üì± Mobile Command"
theme: default

# Mobile-specific global styling
card_mod:
  style: |
    :host {
      --primary-color: #D4A574;
      --accent-color: #FF8C00;
      --primary-text-color: #2F1B14;
      --card-background-color: #FFF8DC;
      --primary-background-color: #F5E6D3;
      --mdc-button-outline-color: #FF8C00;
      --mushroom-card-primary-color: #D4A574;
      --mushroom-card-secondary-color: #8B4513;
    }
    
    /* Mobile optimizations */
    @media screen and (max-width: 768px) {
      .view {
        padding: 8px !important;
      }
      ha-card {
        margin: 4px 0 !important;
      }
    }

views:
  - title: "Home"
    icon: mdi:home
    path: home
    badges:
      - entity: sensor.sietch_health_score
        name: "Health"
      - entity: binary_sensor.house_occupied
        name: "Occupied"
    cards:
      # Mobile Header - Compact
      - type: custom:mushroom-title-card
        title: "üèúÔ∏è House Dodson"
        subtitle: "Mobile Command Center (Pocket Sietch)"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #D4A574, #F5E6D3);
              border: 2px solid #FF8C00;
              color: #2F1B14;
              text-align: center;
              margin-bottom: 8px;
            }

      # Quick Status - Single Row
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.sietch_health_score
            name: "System Health"
            secondary_info: "Sietch Status"
            icon: mdi:shield-check
            layout: vertical
            
          - type: custom:mushroom-entity-card
            entity: sensor.spice_production_level
            name: "Efficiency"
            secondary_info: "Spice Production"
            icon: mdi:chart-line
            layout: vertical
            
          - type: custom:mushroom-entity-card
            entity: sensor.water_conservation_index
            name: "Conservation"
            secondary_info: "Water Management"
            icon: mdi:water-percent
            layout: vertical

      # Essential Controls - Swipe Cards
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.notification_system_enabled
            name: "Notifications"
            icon: mdi:bell
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('input_boolean.notification_system_enabled', 'on') %}#32CD32{% else %}#666666{% endif %};
                  color: white;
                }

          - type: custom:mushroom-entity-card
            entity: input_boolean.vacation_mode
            name: "Away Mode"
            icon: mdi:airplane
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('input_boolean.vacation_mode', 'on') %}#FF8C00{% else %}#666666{% endif %};
                  color: white;
                }

      # Emergency Quick Access
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: scene.energy_conservation
            name: "Energy Save"
            icon: mdi:leaf
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.energy_conservation
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #228B22, #32CD32);
                  color: white;
                }

          - type: custom:mushroom-entity-card
            entity: scene.system_storm_mode
            name: "Storm Mode"
            icon: mdi:weather-lightning
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.system_storm_mode
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #4169E1, #1E90FF);
                  color: white;
                }

  - title: "Control"
    icon: mdi:tune
    path: control
    badges: []
    cards:
      # Mobile Controls Header
      - type: custom:mushroom-title-card
        title: "üè† Room Lighting Controls"
        subtitle: "Quick access to all room lights"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #D4A574, #F5E6D3);
              border: 2px solid #FF8C00;
              color: #2F1B14;
              text-align: center;
              margin-bottom: 8px;
            }

      # Kitchen Lighting
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: light.ikea_of_sweden_stoftmoln_ceiling_wall_lamp_ww10_light
            name: "Kitchen Oven"
            icon: mdi:chef-hat
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.ikea_of_sweden_stoftmoln_ceiling_wall_lamp_ww10_light', 'on') %}#FFA500{% else %}#696969{% endif %};
                  color: white;
                }

          - type: custom:mushroom-entity-card
            entity: light.ikea_of_sweden_stoftmoln_ceiling_wall_lamp_ww10_light_2
            name: "Kitchen Sink"
            icon: mdi:water-pump
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.ikea_of_sweden_stoftmoln_ceiling_wall_lamp_ww10_light_2', 'on') %}#FFA500{% else %}#696969{% endif %};
                  color: white;
                }

      # Office Lighting  
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: light.ledvance_a19_rgbw_light
            name: "Office Right"
            icon: mdi:desk-lamp
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.ledvance_a19_rgbw_light', 'on') %}#4169E1{% else %}#696969{% endif %};
                  color: white;
                }

          - type: custom:mushroom-entity-card
            entity: light.ledvance_a19_rgbw_light_2
            name: "Office Upper"
            icon: mdi:ceiling-light
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.ledvance_a19_rgbw_light_2', 'on') %}#4169E1{% else %}#696969{% endif %};
                  color: white;
                }

      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: light.ledvance_a19_rgbw_light_3
            name: "Office Left"
            icon: mdi:floor-lamp
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.ledvance_a19_rgbw_light_3', 'on') %}#4169E1{% else %}#696969{% endif %};
                  color: white;
                }

          # Dining Room Button (All 4 lights)
          - type: custom:mushroom-entity-card
            entity: light.ikea_of_sweden_tradfribulbe12wscandleopal450lm_light
            name: "Dining Room"
            icon: mdi:table-chair
            tap_action:
              action: call-service
              service: script.toggle_dining_room_lights
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.ikea_of_sweden_tradfribulbe12wscandleopal450lm_light', 'on') %}#DC143C{% else %}#696969{% endif %};
                  color: white;
                }

      # Living Areas
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.tp_link_power_strip_173b_couch_lamp
            name: "Living Room"
            icon: mdi:sofa
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('switch.tp_link_power_strip_173b_couch_lamp', 'on') %}#228B22{% else %}#696969{% endif %};
                  color: white;
                }

          - type: custom:mushroom-entity-card
            entity: light.tori_light
            name: "Bedroom"
            icon: mdi:bed
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.tori_light', 'on') %}#9370DB{% else %}#696969{% endif %};
                  color: white;
                }

      # Entry & Outdoor
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: switch.tp_link_power_strip_1446_lamp_by_door
            name: "Entry Door"
            icon: mdi:door-open
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('switch.tp_link_power_strip_1446_lamp_by_door', 'on') %}#DAA520{% else %}#696969{% endif %};
                  color: white;
                }

          - type: custom:mushroom-entity-card
            entity: light.front_light
            name: "Front Yard"
            icon: mdi:home-outline
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.front_light', 'on') %}#FF6347{% else %}#696969{% endif %};
                  color: white;
                }

      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: light.backyard_light
            name: "Backyard"
            icon: mdi:tree
            tap_action:
              action: toggle
            card_mod:
              style: |
                ha-card {
                  background: {% if is_state('light.backyard_light', 'on') %}#8FBC8F{% else %}#696969{% endif %};
                  color: white;
                }

          # Group Controls
          - type: custom:mushroom-entity-card
            entity: script.office_lights_toggle
            name: "Office (All 3)"
            icon: mdi:desk
            tap_action:
              action: call-service
              service: script.toggle
              service_data:
                entity_id: script.office_lights_toggle
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #4169E1, #1E90FF);
                  color: white;
                }

      # Group Controls Row 2
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: script.kitchen_lights_toggle
            name: "Kitchen (Both)"
            icon: mdi:chef-hat
            tap_action:
              action: call-service
              service: script.toggle
              service_data:
                entity_id: script.kitchen_lights_toggle
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #FFA500, #FF8C00);
                  color: white;
                }

          # All Lights Control
          - type: custom:mushroom-entity-card
            entity: scene.energy_conservation
            name: "All Lights Off"
            icon: mdi:lightbulb-off
            tap_action:
              action: call-service
              service: scene.turn_on
              service_data:
                entity_id: scene.energy_conservation
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #800080, #4B0082);
                  color: white;
                }

      # Mobile Controls Header
      - type: custom:mushroom-title-card
        title: "‚öôÔ∏è System Controls"
        subtitle: "Essential system management"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #4169E1, #6495ED);
              color: white;
              text-align: center;
              margin-bottom: 8px;
            }

      # System Modes - Toggle Grid
      - type: grid
        columns: 2
        cards:
          - type: custom:mushroom-entity-card
            entity: input_boolean.guest_mode
            name: "Guest Mode"
            icon: mdi:account-group
            layout: vertical
            tap_action:
              action: toggle
            
          - type: custom:mushroom-entity-card
            entity: input_boolean.maintenance_mode
            name: "Maintenance"
            icon: mdi:wrench
            layout: vertical
            tap_action:
              action: toggle

          - type: custom:mushroom-entity-card
            entity: input_boolean.motion_lighting_enabled
            name: "Motion Lights"
            icon: mdi:lightbulb-auto
            layout: vertical
            tap_action:
              action: toggle
              
          - type: custom:mushroom-entity-card
            entity: input_boolean.climate_automation_enabled
            name: "Climate Auto"
            icon: mdi:thermostat-auto
            layout: vertical
            tap_action:
              action: toggle

      # House Mode Selector
      - type: entities
        title: "üè† House Mode"
        card_mod:
          style: |
            ha-card {
              font-size: 14px;
            }
        entities:
          - entity: input_select.house_mode
            name: "Current Mode"
          - entity: input_select.security_level
            name: "Security Level"

      # Quick Thresholds
      - type: entities
        title: "üéØ Quick Adjustments"
        card_mod:
          style: |
            ha-card {
              font-size: 14px;
            }
        entities:
          - entity: input_number.motion_timeout_minutes
            name: "Motion Timeout"
          - entity: input_number.spice_production_target
            name: "Production Target"

  - title: "Monitor"
    icon: mdi:monitor-dashboard
    path: monitor
    badges: []
    cards:
      # Mobile Monitoring Header
      - type: custom:mushroom-title-card
        title: "üìä System Monitor"
        subtitle: "Status and analytics"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #228B22, #32CD32);
              color: white;
              text-align: center;
              margin-bottom: 8px;
            }

      # Key Metrics - Mobile Optimized
      - type: grid
        columns: 1
        cards:
          - type: gauge
            entity: sensor.sietch_operational_intelligence
            name: "Operational Intelligence"
            unit: "%"
            min: 0
            max: 100
            severity:
              green: 90
              yellow: 75
              red: 60

      # Status Indicators - Compact
      - type: entities
        title: "üö¶ System Status"
        card_mod:
          style: |
            ha-card {
              font-size: 14px;
            }
        entities:
          - entity: binary_sensor.house_occupied
            name: "House Occupied"
            secondary_info: last-changed
          - entity: binary_sensor.all_systems_operational
            name: "All Systems OK"
            secondary_info: last-changed
          - entity: binary_sensor.automation_system_healthy
            name: "Automation Health"
            secondary_info: last-changed

      # Recent Activity - Mobile List
      - type: entities
        title: "üìà Recent Activity"
        card_mod:
          style: |
            ha-card {
              font-size: 14px;
            }
        entities:
          - entity: counter.atlas_daily_motion
            name: "Motion Events Today"
            secondary_info: last-changed
          - entity: counter.spice_harvester_cycles
            name: "Harvester Cycles"
            secondary_info: last-changed
          - entity: timer.motion_light_delay
            name: "Motion Timer"
            secondary_info: last-changed

      # Quick Actions - Mobile Buttons
      - type: entities
        title: "üîß Quick Actions"
        entities:
          - type: button
            name: "System Health Check"
            action_name: "Run"
            service: script.system_health_monitor
            
          - type: button
            name: "Reset Counters"
            action_name: "Reset"
            service: automation.daily_counter_reset

  - title: "Settings"
    icon: mdi:cog
    path: settings
    badges: []
    cards:
      # Mobile Settings Header
      - type: custom:mushroom-title-card
        title: "‚öôÔ∏è Quick Settings"
        subtitle: "Mobile configuration"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #DC143C, #FF6347);
              color: white;
              text-align: center;
              margin-bottom: 8px;
            }

      # Notification Settings
      - type: entities
        title: "üîî Notifications"
        card_mod:
          style: |
            ha-card {
              font-size: 14px;
            }
        entities:
          - entity: input_boolean.daily_reports_enabled
            name: "Daily Reports"
          - entity: input_boolean.threshold_alerts_enabled
            name: "Threshold Alerts"  
          - entity: input_boolean.emergency_alerts_enabled
            name: "Emergency Alerts"
          - entity: input_boolean.night_mode_notifications
            name: "Night Mode"

      # System Preferences
      - type: entities
        title: "üéõÔ∏è Preferences"
        card_mod:
          style: |
            ha-card {
              font-size: 14px;
            }
        entities:
          - entity: input_select.climate_mode
            name: "Climate Mode"
          - entity: input_select.notification_priority
            name: "Alert Priority"
          - entity: input_number.temperature_threshold_high
            name: "Temp High"
          - entity: input_number.temperature_threshold_low
            name: "Temp Low"

      # Mobile Dashboard Settings
      - type: entities
        title: "üì± Dashboard"
        entities:
          - type: button
            name: "Refresh Dashboard"
            action_name: "Refresh"
            service: homeassistant.reload_config_entry
            
          - type: button
            name: "Clear Browser Cache"
            action_name: "Clear"
            service: browser_mod.lovelace_reload

  # Navigation View - Switch between dashboards
  - title: "Navigate"
    icon: mdi:compass
    path: navigate
    badges: []
    cards:
      - type: custom:mushroom-title-card
        title: "üß≠ Dashboard Navigation"
        subtitle: "Switch to other command centers"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #800080, #9370DB);
              color: white;
              text-align: center;
              margin-bottom: 8px;
            }

      # Dashboard Navigation Cards
      - type: grid
        columns: 1
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.sietch_health_score
            name: "üñ•Ô∏è Desktop Command"
            secondary_info: "Full dashboard with analytics (House Dodson Command)"
            icon: mdi:monitor-dashboard
            tap_action:
              action: navigate
              navigation_path: /lovelace-desktop-command
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #4169E1, #1E90FF);
                  color: white;
                  border: 2px solid #0000CD;
                  margin: 4px 0;
                }

          - type: custom:mushroom-entity-card
            entity: sensor.automation_success_rate
            name: "üèõÔ∏è Command Center"
            secondary_info: "Advanced monitoring & analytics (Sietch Command)"
            icon: mdi:console-network
            tap_action:
              action: navigate
              navigation_path: /lovelace-dashboards-sietch-command
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #228B22, #32CD32);
                  color: white;
                  border: 2px solid #006400;
                  margin: 4px 0;
                }

          - type: custom:mushroom-entity-card
            entity: sensor.system_response_time
            name: "‚ö° Performance Monitor"
            secondary_info: "System diagnostics & metrics (Mentat Analysis)"
            icon: mdi:speedometer
            tap_action:
              action: navigate
              navigation_path: /lovelace-dashboards-performance-monitoring
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #FF8C00, #FFA500);
                  color: white;
                  border: 2px solid #FF6347;
                  margin: 4px 0;
                }

      # Quick Access Info
      - type: markdown
        content: |
          ## üìã **Dashboard Guide**
          
          **üì± Mobile Command** - You are here  
          *Touch-optimized controls and quick access*
          
          **üñ•Ô∏è Desktop Command** - Best for computers  
          *Full analytics, detailed views, wide layouts*
          
          **üèõÔ∏è Sietch Command** - Advanced monitoring  
          *Deep system analytics and AI insights*
          
          **‚ö° Performance** - System diagnostics  
          *Technical metrics and performance data*
        card_mod:
          style: |
            ha-card {
              background: #FFF8DC;
              color: #2F1B14;
              border: 2px solid #D4A574;
              font-size: 12px;
            }