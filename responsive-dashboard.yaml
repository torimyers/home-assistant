# ============================================================================
# OPTIMIZED DUNE DASHBOARD - Streamlined for Performance & Integration
# ============================================================================
# Optimizations:
# - Removed all non-existent scene references
# - Streamlined card configurations for better performance  
# - Integrated new template sensors from dune_analytics.yaml
# - Added proper navigation to Sietch Command Center
# - Simplified CSS for faster loading
# - Updated entity references to existing ones only
# - Mobile-responsive design with clean layouts
# ============================================================================

title: "House Atreides Command"
theme: default

# Global card-mod styling for Dune theme (simplified for performance)
card_mod:
  style: |
    :host {
      --primary-color: #D4A574;
      --accent-color: #FF8C00;
      --primary-text-color: #2F1B14;
      --card-background-color: #FFF8DC;
      --primary-background-color: #F5E6D3;
      --ha-card-border-radius: 10px;
    }

views:
  # ============================================================================
  # VIEW 1: MAIN DASHBOARD - Optimized Overview
  # ============================================================================
  - title: "Overview"
    icon: mdi:home-analytics
    path: main-overview
    badges: []
    cards:
      # Navigation Header
      - type: custom:mushroom-title-card
        title: "üèúÔ∏è House Atreides Command"
        subtitle: "Sietch monitoring systems online - the spice must flow"
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #D4A574, #F5E6D3);
              border: 2px solid #FF8C00;
              color: #2F1B14;
            }

      # Quick Navigation to Other Dashboards
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-entity-card
            entity: sensor.sietch_health_score
            name: "Sietch Command Center"
            icon: mdi:castle
            tap_action:
              action: navigate
              navigation_path: /dashboards-sietch_command
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #228B22, #32CD32);
                  color: white;
                  border: 2px solid #006400;
                }

          - type: custom:mushroom-entity-card
            entity: sensor.fremen_activity_level
            name: "Analytics View"
            icon: mdi:chart-line
            tap_action:
              action: navigate
              navigation_path: "#analytics"
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #4169E1, #1E90FF);
                  color: white;
                  border: 2px solid #0000CD;
                }

          - type: custom:mushroom-entity-card
            entity: sensor.automation_success_rate
            name: "Control Systems"
            icon: mdi:console
            tap_action:
              action: navigate
              navigation_path: "#controls"
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(45deg, #800080, #9370DB);
                  color: white;
                  border: 2px solid #4B0082;
                }

      # System Health Overview
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## üìä **SYSTEM VITALS**
              *Real-time Sietch monitoring and health assessment*
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(135deg, #FF8C00, #F5E6D3);
                  color: #2F1B14;
                  text-align: center;
                  border: 2px solid #D4A574;
                }

          - type: horizontal-stack
            cards:
              - type: gauge
                entity: sensor.sietch_health_score
                name: "Sietch Health"
                unit: "%"
                min: 0
                max: 100
                severity:
                  green: 85
                  yellow: 70
                  red: 50
                needle: true

              - type: gauge
                entity: sensor.harvester_efficiency
                name: "Harvester Efficiency"
                unit: "%"
                min: 0
                max: 100
                severity:
                  green: 85
                  yellow: 70
                  red: 55
                needle: true

              - type: gauge
                entity: sensor.water_conservation_index
                name: "Water Conservation"
                unit: "%"
                min: 0
                max: 100
                severity:
                  green: 80
                  yellow: 60
                  red: 45
                needle: true

          # Template Sensor Status Cards
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: sensor.spice_production_level
                name: "Spice Production"
                icon: mdi:shimmer
                primary_info: state
                secondary_info: attribute
                secondary_info_attribute: current_yield

              - type: custom:mushroom-entity-card
                entity: sensor.desert_survival_status
                name: "Survival Status"
                icon: mdi:shield-cross
                primary_info: state
                secondary_info: attribute
                secondary_info_attribute: survival_rating

              - type: custom:mushroom-entity-card
                entity: sensor.atmospheric_conditions
                name: "Atmosphere"
                icon: mdi:weather-partly-cloudy
                primary_info: state
                secondary_info: attribute
                secondary_info_attribute: atmosphere_quality

      # Motion & Activity Section
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## üèÉ **FREMEN ACTIVITY**
              *Motion analysis and presence monitoring*
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(135deg, #32CD32, #228B22);
                  color: white;
                  text-align: center;
                  border: 2px solid #006400;
                }

          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: sensor.fremen_activity_level
                name: "Activity Level"
                icon: mdi:run-fast
                primary_info: state
                secondary_info: attribute
                secondary_info_attribute: tribal_status

              - type: custom:mushroom-entity-card
                entity: sensor.sietch_occupancy_distribution
                name: "Primary Zone"
                icon: mdi:home-analytics
                primary_info: state
                secondary_info: attribute
                secondary_info_attribute: activity_distribution

              - type: custom:mushroom-entity-card
                entity: sensor.motion_pattern_analysis
                name: "Motion Pattern"
                icon: mdi:chart-line
                primary_info: state
                secondary_info: attribute
                secondary_info_attribute: efficiency_score

          # Motion Sensor Status
          - type: entities
            title: "üéØ Zone Monitoring Network"
            entities:
              - entity: binary_sensor.office_motion_detected
                name: "Office Sanctum"
                icon: mdi:desk
              - entity: binary_sensor.kitchen_occupancy
                name: "Ration Preparation"
                icon: mdi:chef-hat
              - entity: binary_sensor.living_room_motion_detected
                name: "Gathering Hall"
                icon: mdi:sofa

      # Quick Scene Controls (Only existing scenes)
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## üéõÔ∏è **SCENE CONTROLS**
              *Available system scenes and automation*
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(135deg, #4169E1, #87CEEB);
                  color: white;
                  text-align: center;
                  border: 2px solid #1E90FF;
                }

          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: scene.morning_awakening
                name: "Dawn Awakening"
                icon: mdi:weather-sunrise
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.morning_awakening

              - type: custom:mushroom-entity-card
                entity: scene.evening_routine
                name: "Sunset Protocol"
                icon: mdi:weather-sunset
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.evening_routine

              - type: custom:mushroom-entity-card
                entity: scene.system_goodnight
                name: "Night Rest"
                icon: mdi:weather-night
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.system_goodnight

          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: scene.energy_conservation
                name: "Conserve Resources"
                icon: mdi:leaf
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.energy_conservation

              - type: custom:mushroom-entity-card
                entity: scene.system_storm_mode
                name: "Storm Defense"
                icon: mdi:weather-lightning
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.system_storm_mode

              - type: custom:mushroom-entity-card
                entity: scene.water_emergency
                name: "Water Emergency"
                icon: mdi:water-alert
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.water_emergency

      # Notification Controls
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## üîî **NOTIFICATION CONTROLS**
              *Manage system notifications and alerts*
            card_mod:
              style: |
                ha-card {
                  background: linear-gradient(135deg, #800080, #9370DB);
                  color: white;
                  text-align: center;
                  border: 2px solid #4B0082;
                }

          - type: entities
            title: "Notification Settings"
            entities:
              - entity: input_boolean.notification_system_enabled
                name: "System Notifications"
                icon: mdi:bell-circle
              - entity: input_boolean.daily_reports_enabled
                name: "Daily Reports"
                icon: mdi:calendar-today
              - entity: input_boolean.threshold_alerts_enabled
                name: "Threshold Alerts"
                icon: mdi:alert-circle
              - entity: input_boolean.achievement_notifications_enabled
                name: "Achievement Alerts"
                icon: mdi:trophy-award
              - entity: input_boolean.emergency_alerts_enabled
                name: "Emergency Alerts"
                icon: mdi:alert-octagon
              - entity: input_boolean.night_mode_notifications
                name: "Night Mode Quiet"
                icon: mdi:weather-night

  # ============================================================================
  # VIEW 2: ANALYTICS - Deep Dive into Template Sensors
  # ============================================================================
  - title: "Analytics"
    icon: mdi:chart-line
    path: analytics
    badges: []
    cards:
      - type: markdown
        content: |
          # üîç **DETAILED ANALYTICS**
          *Deep sensor analysis and system intelligence*
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #D4A574, #F5E6D3);
              color: #2F1B14;
              text-align: center;
              border: 3px solid #FF8C00;
            }

      # Template Sensor Breakdown
      - type: entities
        title: "üéØ Template Sensor Status Report"
        entities:
          - type: section
            label: "Sietch Vitals & System Health"
          - entity: sensor.sietch_health_score
            name: "Health Score"
            secondary_info: attribute
            attribute: status_level
          - entity: sensor.harvester_efficiency
            name: "Harvester Efficiency"
            secondary_info: attribute
            attribute: efficiency_grade
          - entity: sensor.water_conservation_index
            name: "Water Conservation"
            secondary_info: attribute
            attribute: conservation_level
          - entity: sensor.spice_production_level
            name: "Spice Production"
            secondary_info: attribute
            attribute: guild_rating
          - entity: sensor.desert_survival_status
            name: "Survival Status"
            secondary_info: attribute
            attribute: survival_rating
          - type: section
            label: "Motion & Presence Analytics"
          - entity: sensor.fremen_activity_level
            name: "Activity Level"
            secondary_info: attribute
            attribute: current_period
          - entity: sensor.sietch_occupancy_distribution
            name: "Occupancy Distribution"
            secondary_info: attribute
            attribute: most_active_zone
          - entity: sensor.motion_pattern_analysis
            name: "Motion Pattern"
            secondary_info: attribute
            attribute: time_analysis
          - type: section
            label: "Environmental Monitoring"
          - entity: sensor.atmospheric_conditions
            name: "Atmospheric Conditions"
            secondary_info: attribute
            attribute: atmosphere_quality
          - entity: sensor.energy_shield_status
            name: "Energy Shield"
            secondary_info: attribute
            attribute: shield_strength
          - type: section
            label: "Automation Intelligence"
          - entity: sensor.automation_success_rate
            name: "Automation Success"
            secondary_info: attribute
            attribute: recent_activity
          - entity: sensor.blueprint_efficiency_score
            name: "Blueprint Efficiency"
            secondary_info: attribute
            attribute: sensor_responsiveness
          - entity: sensor.night_security_effectiveness
            name: "Night Security"
            secondary_info: attribute
            attribute: security_mode
          - entity: sensor.morning_ritual_completion
            name: "Morning Ritual"
            secondary_info: attribute
            attribute: ritual_phase
          - entity: sensor.system_response_time
            name: "System Response"
            secondary_info: attribute
            attribute: current_load

      # Performance Metrics Dashboard
      - type: horizontal-stack
        cards:
          - type: gauge
            entity: sensor.automation_success_rate
            name: "Automation Success"
            unit: "%"
            min: 0
            max: 100
            severity:
              green: 85
              yellow: 70
              red: 55

          - type: gauge
            entity: sensor.blueprint_efficiency_score
            name: "Blueprint Efficiency"
            unit: "%"
            min: 0
            max: 100
            severity:
              green: 85
              yellow: 70
              red: 55

          - type: gauge
            entity: sensor.system_response_time
            name: "Response Time"
            unit: "%"
            min: 0
            max: 100
            severity:
              green: 85
              yellow: 75
              red: 65

  # ============================================================================
  # VIEW 3: CONTROLS - Interactive Command Interface
  # ============================================================================
  - title: "Controls"
    icon: mdi:console
    path: controls
    badges: []
    cards:
      - type: markdown
        content: |
          # üéõÔ∏è **COMMAND CONTROLS**
          *Interactive Sietch management interface*
        card_mod:
          style: |
            ha-card {
              background: linear-gradient(135deg, #2F1B14, #5D4E37);
              color: #D4A574;
              text-align: center;
              border: 3px solid #FF8C00;
            }

      # Room Scene Controls (Only existing scenes)
      - type: vertical-stack
        cards:
          - type: markdown
            content: "## üè† **Room Protocols**"
            card_mod:
              style: |
                ha-card {
                  background: #D4A574;
                  color: #2F1B14;
                  text-align: center;
                }

          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: scene.kitchen_morning_routine
                name: "Kitchen Dawn"
                icon: mdi:chef-hat
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.kitchen_morning_routine

              - type: custom:mushroom-entity-card
                entity: scene.office_work_mode
                name: "Office Command"
                icon: mdi:desk
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.office_work_mode

              - type: custom:mushroom-entity-card
                entity: scene.living_room_gathering
                name: "Hall Gathering"
                icon: mdi:sofa
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.living_room_gathering

          - type: horizontal-stack
            cards:
              - type: custom:mushroom-entity-card
                entity: scene.bathroom_bright_lights
                name: "Bathroom Illumination"
                icon: mdi:lightbulb
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.bathroom_bright_lights

              - type: custom:mushroom-entity-card
                entity: scene.front_yard_security
                name: "Perimeter Guard"
                icon: mdi:security
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.front_yard_security

              - type: custom:mushroom-entity-card
                entity: scene.garage_work_mode
                name: "Hangar Operations"
                icon: mdi:garage
                tap_action:
                  action: call-service
                  service: scene.turn_on
                  service_data:
                    entity_id: scene.garage_work_mode

      # Power Control Panel
      - type: vertical-stack
        cards:
          - type: markdown
            content: "## ‚ö° **Power Distribution Network**"
            card_mod:
              style: |
                ha-card {
                  background: #4169E1;
                  color: white;
                  text-align: center;
                }

          - type: entities
            title: "Critical Power Systems"
            entities:
              - entity: switch.tp_link_power_strip_173b_couch_lamp
                name: "Couch Illumination Grid"
                icon: mdi:floor-lamp
              - entity: switch.tp_link_power_strip_1446_lamp_by_door
                name: "Entry Portal Light"
                icon: mdi:door-open
              - entity: switch.tp_link_power_strip_1446_cat_bed
                name: "Companion Rest Area"
                icon: mdi:bed

      # System Status Indicators
      - type: entities
        title: "üîç System Status Monitors"
        entities:
          - entity: binary_sensor.house_occupied
            name: "Sietch Occupied"
            icon: mdi:home-account
          - entity: input_boolean.notification_system_enabled
            name: "Notification System"
            icon: mdi:bell-check
          - entity: input_boolean.daily_reports_enabled
            name: "Daily Reports Active"
            icon: mdi:calendar-check
          - entity: input_boolean.emergency_alerts_enabled
            name: "Emergency System"
            icon: mdi:alert-octagon-outline